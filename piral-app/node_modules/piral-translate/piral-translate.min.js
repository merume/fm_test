var piralTranslate=(()=>{var F=Object.create;var u=Object.defineProperty,U=Object.defineProperties,$=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,B=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var P=(e,r,t)=>r in e?u(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,g=(e,r)=>{for(var t in r||(r={}))O.call(r,t)&&P(e,t,r[t]);if(h)for(var t of h(r))V.call(r,t)&&P(e,t,r[t]);return e},f=(e,r)=>U(e,D(r)),A=e=>u(e,"__esModule",{value:!0});var l=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(r,t)=>(typeof require!="undefined"?require:r)[t]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var K=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Y=(e,r)=>{A(e);for(var t in r)u(e,t,{get:r[t],enumerable:!0})},Z=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of N(r))!O.call(e,a)&&a!=="default"&&u(e,a,{get:()=>r[a],enumerable:!(t=$(r,a))||t.enumerable});return e},i=e=>Z(A(u(e!=null?F(B(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var z=K((ye,v)=>{"use strict";var q=function(r){return H(r)&&!J(r)};function H(e){return!!e&&typeof e=="object"}function J(e){var r=Object.prototype.toString.call(e);return r==="[object RegExp]"||r==="[object Date]"||X(e)}var Q=typeof Symbol=="function"&&Symbol.for,W=Q?Symbol.for("react.element"):60103;function X(e){return e.$$typeof===W}function ee(e){return Array.isArray(e)?[]:{}}function p(e,r){return r.clone!==!1&&r.isMergeableObject(e)?c(ee(e),e,r):e}function re(e,r,t){return e.concat(r).map(function(a){return p(a,t)})}function te(e,r){if(!r.customMerge)return c;var t=r.customMerge(e);return typeof t=="function"?t:c}function ae(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(r){return e.propertyIsEnumerable(r)}):[]}function S(e){return Object.keys(e).concat(ae(e))}function j(e,r){try{return r in e}catch{return!1}}function ne(e,r){return j(e,r)&&!(Object.hasOwnProperty.call(e,r)&&Object.propertyIsEnumerable.call(e,r))}function se(e,r,t){var a={};return t.isMergeableObject(e)&&S(e).forEach(function(n){a[n]=p(e[n],t)}),S(r).forEach(function(n){ne(e,n)||(j(e,n)&&t.isMergeableObject(r[n])?a[n]=te(n,t)(e[n],r[n],t):a[n]=p(r[n],t))}),a}function c(e,r,t){t=t||{},t.arrayMerge=t.arrayMerge||re,t.isMergeableObject=t.isMergeableObject||q,t.cloneUnlessOtherwiseSpecified=p;var a=Array.isArray(r),n=Array.isArray(e),s=a===n;return s?a?t.arrayMerge(e,r,t):se(e,r,t):p(r,t)}c.all=function(r,t){if(!Array.isArray(r))throw new Error("first argument should be an array");return r.reduce(function(a,n){return c(a,n,t)},{})};var oe=c;v.exports=oe});var be={};Y(be,{Languages:()=>me,PiralLanguagesPicker:()=>T,createLocaleApi:()=>ge,getUserLocale:()=>ue,setupLocalizer:()=>w,useDynamicLanguage:()=>fe,useTranslate:()=>pe});var x=i(l("piral-core")),T=(0,x.getPiralComponent)("LanguagesPicker");var k=i(z());function E(e){return{selectLanguage(r,t){r.dispatch(a=>{e.language=t;let n=a.language.selected,s=t;return setTimeout(()=>{r.emit("select-language",{previousLanguage:n,currentLanguage:s})},0),f(g({},a),{language:f(g({},a.language),{loading:t===void 0,selected:t})})})},translate(r,t,a){return e&&e.localizeGlobal(t,a)},setTranslations(r,t,a){e.messages[t]=a.global;for(let n of a.locals){let s=r.apis[n.name];if(s){let o=s.getTranslations();o[t]=n.value,s.setTranslations(o)}}},getTranslations(r,t){return{global:e.messages[t],locals:Object.keys(r.apis).map(a=>({name:a,value:r.apis[a].getTranslations()[t]}))}}}}function ie(e,r){return r?"...":""}function le(e,r){return e.replace(/{{\s*([A-Za-z0-9_.]+)\s*}}/g,(t,a)=>a in r?r[a]||"":`{{${a}}}`)}var M=class{constructor(r,t,a,n=ie){this.messages=r;this.language=t;this.languages=a;this.fallback=n}localizeGlobal(r,t){return this.localizeBase(r,t)}localizeLocal(r,t,a){let n=this.translateMessage(r,t,a);return n===void 0?this.localizeBase(t,a):n}localizeBase(r,t){let a=this.translateMessage(this.messages,r,t);return a===void 0?this.fallback(r,this.language):a}translateMessage(r,t,a){let n=this.language,s=n&&r[n],o=s&&s[t];return o&&(a?le(o,a):o)}};var C=i(l("piral-core")),_=e=>(0,C.defaultRender)(void 0);function w(e={}){let r=e.messages||{},t=Object.keys(r),a=t[0]||"en",n=e.language,o=(typeof n=="function"?n(t,a,"en"):n)||a;return new M(r,o,t.length?t:[o],e.fallback)}function ge(e=w()){return r=>(r.defineActions(E(e)),r.dispatch(t=>f(g({},t),{components:g({LanguagesPicker:_},t.components),language:{loading:!1,available:e.languages,selected:e.language}})),t=>{let a={};return{addTranslations(n,s=!0){let o=n;s?o.unshift(e.messages):o.push(e.messages),this.setTranslations(k.all(o))},getCurrentLanguage(n){let s=r.readState(o=>o.language.selected);if(n){n(s);let o=b=>{n(b.currentLanguage)};return t.on("select-language",o),()=>t.off("select-language",o)}return s},setTranslations(n){a=n},getTranslations(){return a},translate(n,s){return e.localizeLocal(a,n,s)}}})}var L=i(l("piral-core"));function ce(e,r){let t=L.cookie.getItem("_culture")||L.storage.getItem("locale");return t||(r?r.toLowerCase().substring(0,2):navigator.language?navigator.language.substring(0,2):e)}function ue(e,r,t){let a=ce(r,t||"");return e.indexOf(a)!==-1?a:r}var d=i(l("react")),m=i(l("piral-core"));function fe(e,r){let[t,a]=(0,d.useState)(e),{selectLanguage:n,setTranslations:s,getTranslations:o}=(0,m.useActions)();return(0,d.useEffect)(()=>{let b=!0,R=o(t);return n(void 0),r(t,R).then(y=>{b&&(s(t,y),n(t))},y=>console.error(y)),()=>{b=!1}},[t]),[t,a]}function pe(){let{translate:e}=(0,m.useActions)();return(0,m.useGlobalState)(r=>r.language.selected),e}var G=i(l("react")),I=i(l("piral-core"));var me=()=>{let{available:e,selected:r}=(0,I.useGlobalState)(t=>t.language);return G.createElement(T,{selected:r,available:e})};return be;})();
