"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.evalDependency = void 0;
const utils_1 = require("../../utils");
/**
 * Compiles the given content from a generic dependency.
 * @param name The name of the dependency to compile.
 * @param content The content of the dependency to compile.
 * @param link The optional link to the dependency.
 * @returns The evaluated dependency.
 */
function evalDependency(name, content, link = '') {
    const mod = {
        exports: {},
    };
    try {
        const sourceUrl = link && `\n//# sourceURL=${link}`;
        const importer = new Function('module', 'exports', 'require', content + sourceUrl);
        const parent = link || name;
        const require = (moduleId) => (0, utils_1.requireModule)(moduleId, parent);
        importer(mod, mod.exports, require);
    }
    catch (e) {
        console.error(`Error while evaluating ${name}.`, e);
    }
    return mod.exports;
}
exports.evalDependency = evalDependency;
//# sourceMappingURL=dependency.js.map