var piralNotifications=(()=>{var k=Object.create;var l=Object.defineProperty,v=Object.defineProperties,B=Object.getOwnPropertyDescriptor,$=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,V=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var h=(t,o,i)=>o in t?l(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i,r=(t,o)=>{for(var i in o||(o={}))b.call(o,i)&&h(t,i,o[i]);if(T)for(var i of T(o))_.call(o,i)&&h(t,i,o[i]);return t},m=(t,o)=>v(t,$(o)),R=t=>l(t,"__esModule",{value:!0});var c=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(o,i)=>(typeof require!="undefined"?require:o)[i]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var A=(t,o)=>{R(t);for(var i in o)l(t,i,{get:o[i],enumerable:!0})},j=(t,o,i)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of M(o))!b.call(t,n)&&n!=="default"&&l(t,n,{get:()=>o[n],enumerable:!(i=B(o,n))||i.enumerable});return t},f=t=>j(R(l(t!=null?k(V(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var W={};A(W,{Notifications:()=>C,PiralNotificationsHost:()=>x,PiralNotificationsToast:()=>P,createNotificationsApi:()=>U});var d={};A(d,{closeNotification:()=>z,openNotification:()=>q});var N=f(c("piral-core"));function q(t,o){t.dispatch(i=>m(r({},i),{notifications:(0,N.prependItem)(i.notifications,o)}))}function z(t,o){t.dispatch(i=>m(r({},i),{notifications:(0,N.excludeOn)(i.notifications,n=>n.id===o.id)}))}var O=f(c("react")),p=f(c("piral-core"));var G=f(c("react")),S=f(c("piral-core")),H=t=>G.createElement("div",{className:"piral-notifications-host",key:"default_notifications"},t.children),E=({children:t})=>(0,S.defaultRender)(t);var u=f(c("react")),I=f(c("piral-core"));var y=f(c("piral-core")),x=(0,y.getPiralComponent)("NotificationsHost"),P=(0,y.getPiralComponent)("NotificationsToast");var C=()=>{let t=(0,I.useGlobalState)(o=>o.notifications);return u.createElement(x,null,t.map(({component:o,close:i,options:n,id:a})=>u.createElement(P,{onClose:i,options:n,key:a},u.createElement(o,{onClose:i,options:n}))))};C.displayName="Notifications";function J(t){return(0,O.isValidElement)(t)}function K(t){if(typeof t=="string"){let o=t;return()=>(0,p.defaultRender)(o)}else if((0,O.isValidElement)(t)){let o=t;return()=>o}return t}function w(t,o,i,n,a={}){let s=r(r({},n),a),e={id:o,component:K(i),options:s,close(){setTimeout(()=>t.closeNotification(e),0)}};return typeof s.autoClose=="number"&&s.autoClose>0&&setTimeout(e.close,s.autoClose),e}function L(t,o,i){let n=[],a=0;for(let{content:s,options:e}of o)n.push(w(t,`global-${a++}`,s,i,e));return n}function Q(t){return o=>m(r({},o),{components:r({NotificationsHost:H,NotificationsToast:E},o.components),notifications:t})}function U(t={}){let{defaultOptions:o={},selectId:i=()=>`${~~(Math.random()*1e4)}`,messages:n=[]}=t;return a=>(a.defineActions(d),a.dispatch((0,p.withAll)(Q(L(a,n,o)),(0,p.withRootExtension)("piral-notifications",C))),s=>({showNotification(e,D){let F=typeof e=="string"||J(e)?e:(0,p.withApi)(a,e,s,"extension"),g=w(a,i(),F,o,D);return a.openNotification(g),g.close}}))}return W;})();
