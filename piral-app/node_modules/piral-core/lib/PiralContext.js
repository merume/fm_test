"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PiralContext = void 0;
const React = require("react");
const state_1 = require("./state");
const createInstance_1 = require("./createInstance");
const components_1 = require("./components");
const hooks_1 = require("./hooks");
const RootListener_1 = require("./RootListener");
const PiralProvider = ({ children }) => {
    const Provider = (0, hooks_1.useGlobalState)((m) => m.provider || React.Fragment);
    return React.createElement(Provider, null, children);
};
/**
 * Represents the Piral app shell frame. Use this component together
 * with an existing instance to render components from micro frontends
 * in your app.
 * Wires the state container together with the global providers.
 *
 * @example
```jsx
const app = (
  <MyRouter>
    <PiralContext instance={yourPiralInstance}>
      <PiralGlobals />
      <MyAppContent />
    </PiralContext>
  </MyRouter>
);
```
 */
const PiralContext = ({ instance = (0, createInstance_1.createInstance)(), children }) => (React.createElement(state_1.StateContext.Provider, { value: instance.context },
    React.createElement(components_1.Mediator, { options: instance.options, key: instance.id }),
    React.createElement(RootListener_1.RootListener, null),
    React.createElement(PiralProvider, null, children)));
exports.PiralContext = PiralContext;
exports.PiralContext.displayName = 'PiralContext';
//# sourceMappingURL=PiralContext.js.map