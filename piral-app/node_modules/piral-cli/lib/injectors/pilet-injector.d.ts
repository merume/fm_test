/// <reference types="node" />
/// <reference types="node" />
import { EventEmitter } from 'events';
import { KrasInjector, KrasResponse, KrasRequest, KrasInjectorConfig, KrasConfiguration, KrasResult } from 'kras';
import { Bundler } from '../types';
interface Pilet {
    bundler: Bundler;
    root: string;
    getMeta(basePath: string): PiletMetadata;
}
export interface PiletInjectorConfig extends KrasInjectorConfig {
    pilets: Array<Pilet>;
    /**
     * The base URL for the app shell / portal to be used.
     */
    publicUrl: string;
    /**
     * The base URL for the pilet assets to be used.
     */
    assetUrl?: string;
    /**
     * Defines if properties from the feed (if given) meta response should be taken over to local pilets.
     */
    mergeConfig?: boolean;
    meta: string;
    api: string;
    app: string;
    feed?: string;
    headers?: Record<string, string>;
}
interface PiletMetadata {
    name?: string;
    config?: Record<string, any>;
    [key: string]: unknown;
}
export default class PiletInjector implements KrasInjector {
    config: PiletInjectorConfig;
    private serverConfig;
    private indexPath;
    constructor(config: PiletInjectorConfig, serverConfig: KrasConfiguration, core: EventEmitter);
    get active(): boolean;
    set active(value: boolean);
    get name(): string;
    getOptions(): {};
    setOptions(): void;
    getPiletApi(baseUrl: string): string;
    getPiletMeta(baseUrl: string, pilet: Pilet): string;
    getIndexMeta(baseUrl: string): Promise<string>;
    loadRemoteFeed(feed?: string | Array<string>): Promise<Array<Array<PiletMetadata>>>;
    mergePilets(localPilets: Array<PiletMetadata>, remoteFeeds: Array<Array<PiletMetadata>>): PiletMetadata[];
    sendContent(content: Buffer | string, type: string, url: string): KrasResponse;
    sendFile(target: string, url: string): KrasResponse;
    sendResponse(path: string, url: string, baseUrl: string): Promise<KrasResult>;
    sendIndexFile(target: string, url: string, baseUrl: string): KrasResponse;
    handle(req: KrasRequest): KrasResponse;
}
export {};
